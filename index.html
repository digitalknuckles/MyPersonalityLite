<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MBTI NFT Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
      text-align: center;
    }
    .container {
      max-width: 600px;
      background: white;
      margin: auto;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .question {
      font-size: 1.25rem;
      margin-bottom: 20px;
    }
    .option {
      background: #e0e0e0;
      border: none;
      margin: 10px 0;
      padding: 12px 20px;
      width: 100%;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
    }
    .option:hover {
      background: #d4d4d4;
    }
    .result-img {
      width: 200px;
      height: 200px;
      margin: 20px auto;
    }
    .btn {
      background: #007bff;
      color: white;
      padding: 10px 20px;
      border: none;
      margin: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
<div class="container" id="quiz-container">
  <div id="quiz-content">
    <!-- Questions & Answers rendered here -->
  </div>
</div>

<script>
  const questions = [
    {
      question: 'How do you typically approach new experiences and ideas?',
      options: [
        { text: 'With enthusiasm and excitement', value: 'E' },
        { text: 'With careful consideration and analysis', value: 'I' },
        { text: 'With a desire for spontaneity and fun', value: 'P' },
        { text: 'With a focus on practicality and efficiency', value: 'J' },
      ]
    },
    {
      question: 'How do you prefer to organize your tasks and responsibilities?',
      options: [
        { text: 'I prefer to have a clear plan and structure', value: 'J' },
        { text: 'I tend to be flexible and adapt to changing situations', value: 'P' },
        { text: 'I like to keep things open-ended and go with the flow', value: 'P' },
        { text: 'I rely on my instincts and intuition to guide me', value: 'N' },
      ]
    },
    {
      question: 'How would you describe your social interactions?',
      options: [
        { text: 'I enjoy being the center of attention and meeting new people', value: 'E' },
        { text: 'I value close relationships and prefer smaller gatherings', value: 'I' },
        { text: 'I thrive in social settings and love engaging with others', value: 'E' },
        { text: 'I\'m more reserved and prefer one-on-one conversations', value: 'I' },
      ]
    }
    // You can add more questions here
  ];

  const mbtiMap = {
    INFP: 'bafkreidouwoq443wdijffua2r77rgkryzizl5zlyyxxfiykkz4tdb3y2zq',
    ESTJ: 'bafkreihoxbvvmwzete7d4hpfbsxwrwk66votcjezhcycn6wlknwj4mx6ra',
    ENFP: 'bafkreibf3sdifhgnk554k73qmdk547bk7b56ht2lypu33pqdzdx2yltbm4',
    ISTJ: 'bafkreieeda4noiqfhsivkrwrnvsav3mw5gnmhjauvy76bc6uxflyxxwfua'
    // Add the remaining types here
  };

  let current = 0;
  const score = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

  const quizContent = document.getElementById('quiz-content');

  function showQuestion() {
    const q = questions[current];
    quizContent.innerHTML = `
      <div class="question">${q.question}</div>
      ${q.options.map((opt, i) => `
        <button class="option" onclick="handleAnswer('${opt.value}')">${opt.text}</button>
      `).join('')}
    `;
  }

  function handleAnswer(value) {
    score[value]++;
    current++;
    if (current < questions.length) {
      showQuestion();
    } else {
      showResult();
    }
  }

  function getMBTI() {
    const type = 
      (score.I > score.E ? 'I' : 'E') +
      (score.N > score.S ? 'N' : 'S') +
      (score.F > score.T ? 'F' : 'T') +
      (score.P > score.J ? 'P' : 'J');
    return type;
  }

  function showResult() {
    const mbti = getMBTI();
    const cid = mbtiMap[mbti] || 'placeholder';
    quizContent.innerHTML = `
      <h2>Your MBTI Type: ${mbti}</h2>
      <img class="result-img" src="https://ipfs.io/ipfs/${cid}" alt="${mbti}" />
      <p>Personality matched! Mint your NFT below:</p>
      <button class="btn" onclick="alert('Connect Wallet (Web3 placeholder)')">Connect Wallet</button>
      <button class="btn" onclick="alert('Mint NFT for ${mbti} (Web3 placeholder)')">Mint NFT</button>
    `;
  }

  // Start quiz
  showQuestion();
</script>
</body>
</html>
